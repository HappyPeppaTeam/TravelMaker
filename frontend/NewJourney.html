<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="./src/images/favicon_io/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="./src/images/favicon_io/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="./src/images/favicon_io/favicon-16x16.png" />
  <link rel="manifest" href="./src/images/favicon_io/site.webmanifest" />

  <title>New Journey</title>

  <!-- bootstrap CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>

  <!-- bootstrap icon CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />


  <!-- FullCalendar -->
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/bootstrap5@6.1.8/index.global.min.js"></script>

  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script> -->


  <!-- navbar css -->
  <link rel="stylesheet" href="./src/css/navbar.css">
  <!-- sidebar css -->
  <link rel="stylesheet" href="./src/css/sidebar.css">
  <!-- newJourney css -->
  <link rel="stylesheet" href="./src/css/newJourney.css">

</head>

<body class="bg-blue-1">
  <!-- navbar -->
  <nav class="navbar navbar-expand-lg bg-main px-2 shadow">
    <div class="container-fluid">
      <a class="navbar-brand me-auto" href="#"><img src="./src/images/logo.png" style="height: 70px" alt="" /></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <a class="ms-auto me-3 d-none d-lg-block" href="#"><img src="./src/images/dark-mode.png" style="height: 40px"
            alt="" /></a>
        <ul class="navbar-nav py-3">
          <li class="nav-item">
            <a class="nav-link" href="#">註冊</a>
          </li>
          <li class="nav-item ms-lg-2">
            <a class="nav-link" href="#">登入</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container-lg shadow p-0 bg-white" id="body-container">
    <!-- <div class="d-flex" id="content-container"> -->
    <div class="d-flex flex-nowrap row container-fluid m-0 p-0" id="content-container">
      <!-- side bar -->
      <div class="col-auto col-md-3 col-xl-2 d-none d-sm-block p-0">
        <div class="d-flex flex-column flex-shrink-0 p-3 bg-blue-1 align-items-center" id="sidebar-container"
          style="height: 100%; min-height: calc(100vh - 70px)">
          <ul class="nav nav-pills flex-column mb-auto">
            <li class="nav-item">
              <a href="#" class="nav-link text-white d-flex align-items-center sidebar-link" aria-current="page">
                <i class="bi bi-person-vcard-fill"></i>
                <span class="d-none d-sm-inline px-2"> 基本資料 </span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link text-white d-flex align-items-center sidebar-link">
                <i class="bi bi-envelope-fill"></i>
                <span class="d-none d-sm-inline px-2"> 我的信箱 </span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link text-white d-flex align-items-center sidebar-link">
                <i class="bi bi-calendar-week"></i>
                <span class="d-none d-sm-inline px-2"> 我的行程 </span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link text-white d-flex align-items-center sidebar-link">
                <i class="bi bi-image"></i>
                <span class="d-none d-sm-inline px-2"> 我的相簿 </span>
              </a>
            </li>
            <li>
              <a href="#my-collection-submenu" class="nav-link text-white d-flex align-items-center sidebar-link"
                data-bs-toggle="collapse" role="button">
                <i class="bi bi-star-fill"></i>
                <span class="d-none d-sm-inline px-2"> 我的收藏 </span>
              </a>

              <div class="collapse text-white" id="my-collection-submenu">
                <ul style="list-style-type: none; padding: 0" class="d-flex align-items-center flex-column">
                  <li>
                    <a href="#" class="nav-link px-0">
                      <i class="bi bi-stack"></i>
                      <span class="d-none d-sm-inline ms-1">全部</span>
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link px-0">
                      <i class="bi bi-calendar-heart"></i>
                      <span class="d-none d-sm-inline ms-1">行程</span>
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link px-0">
                      <i class="bi bi-camera"></i>
                      <span class="d-none d-sm-inline ms-1">景點</span>
                    </a>
                  </li>
                  <li>
                    <a href="#" class="nav-link px-0">
                      <i class="bi bi-cup-straw"></i>
                      <span class="d-none d-sm-inline ms-1">餐廳</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <!-- main content -->
      <div class="flex-fill px-0 justify-content-center" id="content"
        style="height: 100%; min-height: calc(100vh - 70px)">
        <div class="m-5">
          <div class="d-flex align-items-end">
            <a href="" class="rm-link-style">
              <div class="h1">
                建立行程 <span class="d-none">- 金瓜石之旅</span>
              </div>
            </a>
          </div>
          <div class="progress my-3" role="progressbar" aria-label="Basic example" aria-valuenow="25" aria-valuemin="0"
            aria-valuemax="100" style="height: 2px">
            <div class="progress-bar" id="progressBar" style="width: 50%"></div>
          </div>
          <div class="container px-0">
            <form id="newJourneyForm">
              <div id="newJourneyForm1" class="tab">
                <div class="mb-3">
                  <label for="inputJourneyName" class="form-label">行程名稱</label>
                  <input type="text" class="form-control" id="inputJourneyName" aria-describedby="inputJourneyName"
                    placeholder="ex. 金瓜石兩日遊" />
                </div>
                <div class="mb-3">
                  <label for="inputJourneyDestination" class="form-label">行程目的地</label>
                  <input type="text" class="form-control" id="inputJourneyDestination"
                    aria-describedby="inputJourneyDestination" placeholder="ex. 台北" />
                </div>
                <div class="mb-3">
                  <label for="inputJourneyStart" class="form-label">開始日期</label>
                  <input type="date" class="form-control" id="inputJourneyStart" aria-describedby="inputJourneyStart" />
                </div>
                <div class="mb-3">
                  <label for="inputJourneyDays" class="form-label">行程天數</label>
                  <input type="number" class="form-control" id="inputJourneyDays" aria-describedby="inputJourneyDays" />
                </div>
              </div>

              <div id="newJourneyForm2" class="tab">
                <div id="calendarContainer" class="w-100 mb-3 p-3 rounded shadow" style="min-height: 500px;"></div>
                <div id="mapContainer" class="w-100" style="height: 300px; border: lightblue solid">Map</div>
              </div>

              <div id="newJourneyForm3" class="tab">
                <div class="mb-3">
                  <div class="mb-3">
                    <div class="mb-1">加入圖片</div>
                    <label for="formFileMultiple" class="form-label">本機上傳</label>
                    <input class="form-control mb-2" type="file" id="formFileMultiple" multiple />

                    <label for="fromAlbum" class="form-label">相簿上傳</label>

                    <div class="input-group mb-3">
                      <button class="btn btn-outline-secondary dropdown-toggle" data-bs-auto-close="outside"
                        data-bs-toggle="dropdown" type="button" id="fromAlbum" aria-expanded="false">
                        選擇相簿
                      </button>
                      <ul class="dropdown-menu" id="albumMenu">

                        <li><a class="dropdown-item" href="#" data-bs-toggle="modal"
                            data-bs-target="#albumModal">新北兩日遊</a></li>
                        <li><a class="dropdown-item" href="#" data-bs-toggle="modal"
                            data-bs-target="#albumModal">金瓜石之旅</a></li>
                        <li><a class="dropdown-item" href="#" data-bs-toggle="modal"
                            data-bs-target="#albumModal">安平好熱</a></li>
                        <li><a class="dropdown-item" href="#">我的收藏</a></li>

                      </ul>
                      <input type="text" class="form-control" placeholder="" aria-label="Example text with button addon"
                        aria-describedby="button-addon1" />
                    </div>

                    <div class="container-fluid mt-3" style="height: 300px; border: lightgrey solid"></div>
                  </div>

                  <div class="mb-3">
                    <label for="publicRadio" class="form-label">公開設定</label>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="privacyRadio" value="" id="publicRadio" />
                      <label class="form-check-label" for="publicRadio">
                        公開
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="privacyRadio" value="" id="privateRadio"
                        checked />
                      <label class="form-check-label" for="privateRadio">
                        不公開
                      </label>
                    </div>
                  </div>

                  <div class="mb-3">
                    <label for="inputNoteJourney" class="form-label">備註</label>
                    <textarea class="form-control" id="inputNoteJourney" rows="3"></textarea>
                  </div>
                </div>
              </div>

              <div id="newJourneyBrowse" class="tab">
                <div id="browseCalendarContainer" class="w-100 mb-3" style="height: 500px; border: grey solid">
                  <h2>Calendar</h2>
                </div>
                <div id="browserMapContainer" class="w-100 mb-3" style="height: 300px; border: lightblue solid">
                  <h2>Map</h2>
                </div>
                <div id="browseTextContainer" class="w-100 mb-3" style="height: 300px; border: lightgrey solid">
                  <h2>Note</h2>
                  <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Repellendus in provident vitae id?
                    Repudiandae sit maiores expedita. Veniam nulla, atque, expedita pariatur natus, debitis at explicabo
                    consectetur nobis sequi perferendis?
                    Necessitatibus culpa perspiciatis aut. Eaque corporis ullam porro, provident modi voluptatibus
                    praesentium amet aliquam veritatis cum ipsam hic impedit dicta sint dolorem iure excepturi aut unde
                    exercitationem libero officia possimus?</p>
                </div>
                <div id="browserImageContainer" class="w-100 mb-3" style="height: 200px; border: lightcoral solid">
                  <h2>Image</h2>
                </div>
              </div>
            </form>




            <div class="mt-5 d-flex">
              <div class="active-text" id="prevButton">
                <i class="bi bi-arrow-left"></i><span class="ps-1">上一步</span>
              </div>
              <div class="ms-auto active-text" id="nextButton">
                <span class="pe-1" id="nextStepText">下一步</span><i class="bi bi-arrow-right" id="nextStepIcon"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- footer -->
  <footer class="bg-main py-3 shadow mt-3">
    <p class="mb-0 text-center text-white">
      © 2023 Travel Maker All Rights Reserved.
    </p>
  </footer>

  <!-- rwd sidebar bottom -->
  <div class="container-fluid bg-blue-1 shadow fixed-bottom d-flex d-sm-none align-items-center" style="height: 50px">
    <div class="w-100">
      <ul class="d-flex rm-ul-style justify-content-around" style="list-style-type: none" id="sidebarBottom">
        <li>
          <a href="#" class="nav-link text-white">
            <i class="bi bi-person-vcard-fill"></i>
          </a>
        </li>
        <li>
          <a href="#" class="nav-link text-white">
            <i class="bi bi-envelope-fill"></i>
          </a>
        </li>
        <li>
          <a href="#" class="nav-link text-white">
            <i class="bi bi-calendar-week"></i>
          </a>
        </li>
        <li>
          <a href="#" class="nav-link text-white">
            <i class="bi bi-image"></i>
          </a>
        </li>
        <li>
          <a href="#" class="nav-link text-white">
            <i class="bi bi-star-fill"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>


  <!-- Modal -->
  <div class="modal fade" id="albumModal" tabindex="-1" aria-labelledby="albumModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-fullscreen-sm-down">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="albumModalTitle">新北兩日遊</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="container-fluid px-0">
            <div class="row g-3">
              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <input type="checkbox" class="form-check-input position-absolute img-check"
                  id="img1">
                <label class="w-100 shadow rounded image-box img-label" for="img1"></label>
              </div>

              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <input type="checkbox" class="form-check-input position-absolute img-check"
                    id="img2">
                <label class="w-100 shadow rounded image-box img-label" for="img2"></label>
              </div>

              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <input type="checkbox" class="form-check-input position-absolute img-check"
                    id="img3">
                <label class="w-100 shadow rounded image-box img-label" for="img3"></label>
              </div>
              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <div class="w-100 shadow rounded image-box"></div>
              </div>
              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <div class="w-100 shadow rounded image-box"></div>
              </div>
              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <div class="w-100 shadow rounded image-box"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>


  <script>
    window.onload = function () {
      var currentTab = 0;
      showTab(currentTab);

      function showTab(n) {
        const tabs = document.getElementsByClassName("tab");
        const prevButton = document.getElementById("prevButton");
        const nextButton = document.getElementById("nextButton");
        const progressBar = document.getElementById("progressBar");

        // set progress bar
        let progressPercent = (100 / tabs.length) * (n + 1);
        progressBar.setAttribute("style", `width: ${progressPercent}%`);

        tabs[n].style.display = "block";


        if (n == 0) {
          prevButton.style.display = "none";
        } else {
          prevButton.style.display = "block";
        }

        if (n == tabs.length - 1) {
          nextButton.getElementsByTagName("span")[0].innerText = "完成";
          // nextButton.getElementsByTagName('i').style.display = 'none';
        } else {
          nextButton.getElementsByTagName("span")[0].innerText = "下一步";
        }

        // if (n === 1){
        //   calender.render();
        // }
      }

      function nextPrev(n) {
        const tabs = document.getElementsByClassName("tab");
        tabs[currentTab].style.display = "none";
        currentTab += n;

        // for testing : return to first page after finished form 
        if (currentTab >= tabs.length || currentTab < 0) {
          currentTab = 0;
          // return false;
        }

        // console.log(currentTab)
        showTab(currentTab);
      }

      let prevButton = document.getElementById("prevButton");
      let nextButton = document.getElementById("nextButton");

      prevButton.addEventListener("click", function () {
        nextPrev(-1);
      });

      nextButton.addEventListener("click", function () {
        nextPrev(1);
      });



      const calContainerEl = document.getElementById('calendarContainer');
      // console.log(calContainerEl);

      var calender = new FullCalendar.Calendar(calContainerEl, {
        themeSystem: 'bootstrap5',
        initialView: 'timeGrid',
        selectable: true,

        

        visibleRange: {
          start: '2023-07-22',
          end: '2023-07-25'
        }

      });




      const newJourneyForm2El = document.getElementById('newJourneyForm2');

      nextButton.addEventListener("click", function () {
        // nextPrev(1);
        console.log(calender);
        if (newJourneyForm2El.style.display == 'block') {
          calender.render();
        }
      });







    };


  </script>
</body>

</html>